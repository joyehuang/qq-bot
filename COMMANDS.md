# QQ 打卡机器人指令文档

## 基础命令

所有命令需要在群里 @机器人 后发送，私聊可直接发送。

**@ 方式支持：**
- QQ 原生 @（从成员列表选择）
- 手动输入 `@JoyeBot`、`@joye`、`@打卡` 等

### 打卡相关

| 命令 | 说明 | 示例 |
|------|------|------|
| `我想打卡` / `注册` / `加入打卡` | 新人注册，获取使用说明 | `我想打卡` |
| `打卡 [时长] [内容]` | 记录打卡 | `打卡 30分钟 学习TypeScript` |
| `打卡 贷款 [时长] [内容]` | 贷款打卡（预支未来的打卡） | `打卡 贷款 1小时 学习` |
| `打卡记录` / `我的打卡` | 查看打卡统计 | `打卡记录` |
| `负债` / `我的负债` / `欠款` / `查看负债` | 查看贷款负债情况 | `负债` |

### 排行榜

| 命令 | 说明 | 示例 |
|------|------|------|
| `今日排行` / `今日榜` / `日榜` | 今日打卡排行榜 | `今日排行` |
| `本周排行` / `周排行` / `周榜` | 本周打卡排行榜 | `周榜` |
| `总排行` / `排行榜` / `总榜` | 总打卡排行榜 | `排行榜` |
| `群统计` / `群数据` / `今日统计` | 查看群整体打卡数据 | `群统计` |

**连续打卡：**
- 每次正常打卡会自动更新连续打卡天数
- 打卡成功后会显示当前连续天数
- 如果断签会重新从1天开始计算

**支持的时长格式：**
- 分钟：`30分钟`、`45m`、`30分`、`60min`
- 小时：`1小时`、`2h`、`1.5时`、`3hr`
- 复合：`1小时30分钟`、`2h30m`
- 天数：`1天`、`2d`
- 秒数：`3600秒`、`1800s`（自动转换为分钟）
- 纯数字：`30`（默认为分钟）

**贷款打卡机制：**
- 贷款打卡会产生"负债"，需要通过正常打卡来"还款"
- 正常打卡的时长会自动抵消贷款负债
- 打卡记录中会显示当前负债总额
- 连续贷款会收到调侃提醒
- 还清所有贷款会有特别祝贺

### GitHub 相关

| 命令 | 说明 | 示例 |
|------|------|------|
| `github` / `GitHub` / `代码` / `提交` | 查看今日 GitHub 提交数量 | `github` |

根据提交数量会有不同的回复：
- 0 次：提醒去写代码
- 1-4 次：继续加油
- 5-9 次：效率不错
- 10+ 次：代码狂魔

### 互动功能

| 命令 | 说明 | 示例 |
|------|------|------|
| `建议` / `反馈` / `新功能` | 提交功能建议 | `建议 希望添加排行榜功能` |
| `帮助` / `help` | 查看帮助信息 | `帮助` |
| `ping` | 测试机器人 | `ping` |

### 自我介绍（模糊匹配）

机器人会自动识别以下类型的问题：

**身份询问：**
- `你是谁`、`你叫什么`、`介绍一下`、`自我介绍`、`是什么机器人` 等

**能力询问：**
- `你能做什么`、`有什么功能`、`怎么用`、`如何使用` 等

**打招呼：**
- `你好`、`在吗`、`hello`、`hi`、`早上好` 等

---

## 管理员命令

只有管理员可以使用以下命令。

### 开关机控制（模糊匹配）

**关机命令：**
- `闭嘴`、`关机`、`不准说话`、`安静`、`别说了`、`休息`、`下班`、`关闭`、`停止`、`别吵`

**开机命令：**
- `开机`、`说话`、`醒醒`、`起来`、`上班`、`开启`、`启动`、`工作`、`唤醒`、`醒来`

### 管理员查询

| 命令 | 说明 |
|------|------|
| `管理员列表` / `管理列表` | 查看当前所有管理员 |

---

## 超级管理员命令

只有超级管理员（环境变量 `ADMIN_QQ` 配置的 QQ 号）可以使用。

| 命令 | 说明 | 示例 |
|------|------|------|
| `添加管理` / `添加管理员` | 添加新管理员 | `添加管理 123456789` |
| `删除管理` / `删除管理员` / `移除管理` / `移除管理员` | 删除管理员 | `删除管理 123456789` |
| `督促` / `测试督促` | 手动触发打卡督促（测试用） | `督促` |

**注意：** 超级管理员不能被删除。

---

## 权限说明

- **普通用户**：可使用基础命令
- **管理员**：可使用基础命令 + 管理员命令
- **超级管理员**：可使用所有命令，可管理其他管理员

---

## 自动功能

### 打卡督促

机器人会在每天指定时间检查超级管理员是否已打卡，如未打卡则在群里 @提醒。

- 默认时间：墨尔本时间 19:00
- 可通过环境变量自定义时间和时区

---

## 配置说明

在 `.env` 文件中配置：

```env
# 机器人QQ号（用于精确检测@，推荐配置）
BOT_QQ="机器人QQ号"

# 超级管理员QQ号
ADMIN_QQ="你的QQ号"

# 打卡督促配置
REMINDER_GROUP_ID="群号"           # 督促消息发送的群
REMINDER_HOUR="19"                 # 督促时间（小时，24小时制）
REMINDER_MINUTE="0"                # 督促时间（分钟）
REMINDER_TIMEZONE="Australia/Melbourne"  # 时区

# GitHub 配置
GITHUB_USERNAME="你的GitHub用户名"
# GitHub Token（可选，用于访问私有仓库）
# 生成地址: https://github.com/settings/tokens
# 需要 repo 权限
GITHUB_TOKEN="ghp_xxxx"
```

**注意事项：**
- 单次打卡时长最多支持 7 天（10080 分钟）
- 配置 `BOT_QQ` 可以避免机器人误响应其他人的 @ 消息
