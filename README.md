# QQ 打卡机器人

一个基于 NapCat 的 QQ 群打卡机器人，帮助群成员记录和追踪学习、运动等活动时长。

## 功能特性

- **打卡记录** - 支持多种时长格式（分钟、小时、天等）
- **打卡统计** - 查看个人打卡历史和累计时间
- **功能建议** - 用户可提交功能建议
- **智能问答** - 模糊匹配自我介绍相关问题
- **管理员系统** - 支持多级管理员权限
- **开关机控制** - 管理员可控制机器人开关

## 技术栈

- **运行时**: Node.js + TypeScript
- **QQ 协议**: NapCat (OneBot 11)
- **数据库**: SQLite + Prisma ORM
- **通信**: WebSocket

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 配置环境变量

创建 `.env` 文件：

```env
DATABASE_URL="file:./dev.db"
ADMIN_QQ="你的QQ号"
```

### 3. 初始化数据库

```bash
npx prisma migrate dev
```

### 4. 启动 NapCat

确保 NapCat 已配置并运行在 `ws://localhost:6100`

### 5. 启动机器人

```bash
npx ts-node src/index.ts
```

## 使用方法

在群里 @机器人 后发送命令，私聊可直接发送。

### 基础命令

| 命令 | 说明 | 示例 |
|------|------|------|
| `打卡 [时长] [内容]` | 记录打卡 | `打卡 30分钟 学习TypeScript` |
| `打卡记录` | 查看打卡统计 | `打卡记录` |
| `建议 [内容]` | 提交功能建议 | `建议 希望添加排行榜` |
| `帮助` | 查看帮助 | `帮助` |

### 支持的时长格式

- 分钟：`30分钟`、`45m`、`30分`
- 小时：`1小时`、`2h`、`1.5时`
- 复合：`1小时30分钟`、`2h30m`
- 天数：`1天`、`2d`
- 秒数：`3600秒`（自动转分钟）

### 管理员命令

- **开关机**：`闭嘴`/`关机` 和 `开机`/`醒醒`
- **查看管理员**：`管理员列表`

### 超级管理员命令

- **添加管理员**：`添加管理 [QQ号]`
- **删除管理员**：`删除管理 [QQ号]`

## 项目结构

```
qq-bot/
├── src/
│   └── index.ts          # 主程序
├── prisma/
│   └── schema.prisma     # 数据库模型
├── napcat/
│   └── config/           # NapCat 配置
├── COMMANDS.md           # 完整指令文档
├── CLAUDE.md             # 开发规范
└── README.md
```

## 详细文档

- [完整指令文档](./COMMANDS.md) - 所有命令的详细说明

## License

MIT
